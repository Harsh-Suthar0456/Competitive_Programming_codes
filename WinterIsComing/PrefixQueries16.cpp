#include<iostream>
#include<cmath>
using namespace std;
#define MOD 1000000007
long long int sumstore[100000][240];
long long int arr[100000],query[100000][2];
long long int valstore[240]={1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 73741817, 147483634, 294967268, 589934536, 179869065, 359738130, 719476260, 438952513, 877905026, 755810045, 511620083, 23240159, 46480318, 92960636, 185921272, 371842544, 743685088, 487370169, 974740338, 949480669, 898961331, 797922655, 595845303, 191690599, 383381198, 766762396, 533524785, 67049563, 134099126, 268198252, 536396504, 72793001, 145586002, 291172004, 582344008, 164688009, 329376018, 658752036, 317504065, 635008130, 270016253, 540032506, 80065005, 160130010, 320260020, 640520040, 281040073, 562080146, 124160285, 248320570, 496641140, 993282280, 986564553, 973129099, 946258191, 892516375, 785032743, 570065479, 140130951, 280261902, 560523804, 121047601, 242095202, 484190404, 968380808, 936761609, 873523211, 747046415, 494092823, 988185646, 976371285, 952742563, 905485119, 810970231, 621940455, 243880903, 487761806, 975523612, 951047217, 902094427, 804188847, 608377687, 216755367, 433510734, 867021468, 734042929, 468085851, 936171702, 872343397, 744686787, 489373567, 978747134, 957494261, 914988515, 829977023, 659954039, 319908071, 639816142, 279632277, 559264554, 118529101, 237058202, 474116404, 948232808, 896465609, 792931211, 585862415, 171724823, 343449646, 686899292, 373798577, 747597154, 495194301, 990388602, 980777197, 961554387, 923108767, 846217527, 692435047, 384870087, 769740174, 539480341, 78960675, 157921350, 315842700, 631685400, 263370793, 526741586, 53483165, 106966330, 213932660, 427865320, 855730640, 711461273, 422922539, 845845078, 691690149, 383380291, 766760582, 533521157, 67042307, 134084614, 268169228, 536338456, 72676905, 145353810, 290707620, 581415240, 162830473, 325660946, 651321892, 302643777, 605287554, 210575101, 421150202, 842300404, 684600801, 369201595, 738403190, 476806373, 953612746, 907225485, 814450963, 628901919, 257803831, 515607662, 31215317, 62430634, 124861268, 249722536, 499445072, 998890144, 997780281, 995560555, 991121103, 982242199, 964484391, 928968775, 857937543, 715875079, 431750151, 863500302, 727000597, 454001187, 908002374, 816004741, 632009475, 264018943, 528037886, 56075765, 112151530, 224303060, 448606120, 897212240, 794424473, 588848939, 177697871, 355395742, 710791484, 421582961, 843165922, 686331837, 372663667, 745327334, 490654661, 981309322, 962618637, 925237267, 850474527, 700949047};

int givesum(int index,int jminusi){
    if(sumstore[index][jminusi] !=0) return sumstore[index][jminusi];
    else{
        long long int r=pow(2,jminusi);
        sumstore[index][jminusi]=givesum(index,jminusi-1) + (valstore[jminusi]*arr[index+jminusi])%MOD;
    sumstore[index][jminusi] = (sumstore[index][jminusi])%MOD;}
    return sumstore[index][jminusi];
}

void solve(int qnum){
    /*long long int sum=0;give(index+jminusi,jminusi);
    for(int i=0;i<=query[qnum][1]-query[qnum][0];i++){
        //sum +=store[query[qnum][0]+i][i];
        sum += give(query[qnum][0]+i,i);
        sum %=MOD;
    }
    cout <<sum<<endl;*/
    cout << givesum(query[qnum][0],query[qnum][1]-query[qnum][0])<<endl;
}

int main(){
    
    int n,q;
    cin >> n>>q;
    /*for(int i=0;i<n;i++){
    for(int j=1;j<62;j++){
        sumstore[i][j]=-1;
    }
    }*/
    for(int i=0;i<n;i++){
        cin >> arr[i];
    }
    for(int i=0;i<n;i++){
        sumstore[i][0]=arr[i];
    }
    for(int i=0;i<q;i++){
        cin  >> query[i][0]>>query[i][1];
        query[i][0]--;
        query[i][1]--;
    }
    for(int i=0;i<q;i++){
        solve(i);
    }
}